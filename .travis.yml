os:
- linux
- osx
language: java
jdk:
- openjdk11
sudo: false
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
install: skip
test: skip
jobs:
  include:
  - stage: build pull request
    if: type = pull_request
    script: "./gradlew check jacocoTestReport"
  - stage: publish master
    if: branch = master AND NOT type = pull_request AND os = linux
    script: "./gradlew publish -x test"
  - stage: build release
    if: branch =~ /release/ AND os = linux
    script: "./gradlew publish bintrayUpload -Pversion=${TRAVIS_BRANCH#'release/'}
      -x test"
  - stage: release
    if: branch =~ /release/ AND os = linux
    script: "./gradlew closeAndReleaseRepository"
  - stage: github release
    if: branch =~ /release/ AND os = linux
    script: "./scripts/github-release.sh"
before_install:
  - openssl aes-256-cbc -K $encrypted_0468558b4508_key -iv $encrypted_0468558b4508_iv -in web3j.asc.enc -out web3j.asc -d
env:
  global:
  - secure: mel2ZBpGZrgQzXUg7j7t2jYfEARO+Da+bejgEdGTK0bo+yKUvO9jr7OGNsGopg3A/JgVh+h8OKoN22r/cpFJ91rdqHs3T9ReBZIPcXlQVhyUA+gOgGRDq9drOWegrweWahWuPxTmSsNE4/8UrNItf+p8e9DE+89ElUKk3Q84qSEI4SJZdb9qvB4vUGbKtjkIjoGb1v1l4953Q1MZBXb5ExqWgIS+xhCjmvtvEP2F9iqTHZJAY03c5avt6al6a6/tzbn0wHx7fVFLimfTBwVyS08E3dDtUn2U04q2vNPBJ7G8gca9qM7a0cKT/1xOkqdNOJmSZmLMXYIYPjaqsavLKExTKGB0wX2/9HkvDjkXE/47jBe6Ihqq9SXU4t3MxA2gUPrFyMuonJcIvUteY9i69IEvRoWX6X4ik6QkxfYbcaMqVxJNA15pexC69Q/CrJGWkbD+fiZO4APaB30hcG2dLJ/0+ZGQ43WPx9lJWVyTTceHVlDprMj4q9lzma1/Kas1VJPgb+SI+m7Xc8jx/LwJ0ahlogSJumjUhPXAghc4i4J8TkDDguHLxQ28V5yVKCaK/qkqCdsbuw6LaXslptJ7Zu1YACnlGPeZuVYgAsF5JhgzGdUbfZUu3gGOJf76frbQFTn0k9GiVY122wgLt4tDNM17xZSODX4TOh8E7S9rAmw=
  - secure: Q2WDwbdd8db/28FUuTVn5gaOhrsuljUUqIv7TFfJP2u80GNffXYJ6jphcaWjBfx2IWxdGbdbOcYjDZIANWXP8CC0bHd+2qv5LcK573/dKoxiZnQECP5lANNDW7jJ8WVFjEz2pFGRyxbhWvl+i8szpOkaCUwXYZxB5jl048hzNANVMU7GrrHx5NemOzKVNS/lFX6LonAkloHFKkeFWn3y0EUidtpLmKd7ZIWj/0f4CDzHQaZLebX+3Ng1FJsdmEIryjCiJQaXXCnq0aa9Q9ZG5SPiBnci2L3w28LRA/vJPVppodyxRUZMtb7fwdY90vf5V/jGgg3P8o3HOtjYWjNvycCP+JTQmJwlDMUH+KFNFaMIisYboib23MjMDID399qC5f9/uLI3E12zyNsyzyeu8b4TOsRnSPSwcVx/YfceLMSED0BAH56trNttJhY8sr5hFlkk+zY6XFfoelpbRAsdLemHtWw0MxR6MVJUwSQKBGhpDnvn6GLe2EQ4i1q2F8YfXRv21T6O6a4hembklJAaRqEEUAtnB9ALVPnOJL3yiRGaM3GzjESfRwWZ7UEs2oTLO6ubcmN9C4zS8M7QJFLbs1+dzHdJm6+KlyfPImyF7lv7fgLljpwyfnfLBSPpkaVC4z/kChjuVq2W47TzL7C5TNCByp1SgBn+TIfPitB8GlM=
  - secure: EdB2Yp4yhXRUksqgxlFLTPlzonlrgQ1P9m5XwDMzThErt/EAhzVCMfMtJkUG9Xm0MSo3JpAtzAyhlj1a3H+kKn8mW5V1udZvexcNyPY8oojBYStXDp/uOApZ9m3qX3y419t5L0eyUWLb7BpCMn3q6eyTsePnxAve3YEy5HwsgSUw8lxnHqX6VjbOWu8rg6W6jAFfZyZuscdJIpnnjhQZ3XCdV93xZbSCuVtf/oLKMT80RyYddeoMq+L8J1QQqspgVFT67Ijl+bd1xzZic1/9m6Ypn8WEy9fcA8oN+SscUM2JZxPpTZZ1QhsxbFg5OeM5IQsuOwqXX3a2pwhuY7/iQAneeh0mfBIuICDlcItVwupFlexksUVOwFULNvppdQp9zAdK7sS0u/FI62AVIUf4aj1FgzwKrXHFB0ifOB7f/L6R0THbUpTKK1Ytb6Tepf6e5uTKXayj8rVlDRtUzRg6CDUy7c3hKX7GzZaKALJ5rAbiCJd1aOHYqfTNowJ/6LYSpcrMFB2+4Pt+pBjyh2M5ni9qGqf8zzE/Z7/JiQUtbZyCMmcd6TR5vvZoInDlx3rs1Jl8eUN6eSKF/4zqxFlEIwXFt49Lco0QDoxlDWIL0zRyDdn9yavdmdzdG/svsRPAqNAYorNVW1aoAsSMHMFRQTIU/Z989y1f7lBgegIWPNQ=
  - secure: lLxgOKmDBRrUIRilVcKTaK4xFFfe9Hdhh663s6KHkzAITcSLCrEJHlv+bzlXTAHgaycYGWQU4Z64D2QB7GcJBAC90rCidWs7n6XYHzuwf3OP8YYJqFnad8cGaboEQmqwudcQBhWcHf6pmBw7YmGQ6CJGT2CVsENfiCQxsSyaoEUVPv4No0DvInIdTDwUFXOi+CjMo/vIYKxQcI9dEBSB7NnEhr2jp2Qa7019HT7WZ+k2RKdpTg9nvdwRo9LvxLQB8lMVFiP+SI6M7oQuAb1L6TdJimlgEMDcCxfch0XXT8bDgazPlov34GClGBIz5jGyfvc6q9mtLccmXcr9oR4+sp3BmSfHCXoy3kpxyd1zXPE8a8k1JWEwWAwL7bs4S8aym5lCoXJilFJ7cIlDTiZc4LIFMe1SSndWPAnYY0bkgE6A39I8EqVGhhB5GypK3QS/OK0Pmn/yqpeyaTMPm7k3c29MLgyj3Yc4n7dmwssTh5C3RssjYNEJ0z7h3+QSxj/MMzhG10WNGiQ+FE9vnF1MtW0qpnhC5SRj7C8Hs0sLXISGMQsM3fsktV8RbCt2S7xn9o5GU0kWXJoCyi/f/fy9Gq6FhbtWby6VkE4nL1KPgJwhI7WuLT8rKooMrTSEmLjvQhUAQzK3JM3OEWV3++u/7eNjMVBUbttikaXLxK0dbTY=
  - secure: d1hJYib4xrmAONvW9akaa7u7xG3U+jmXnZxjwHkBXonDGxNNpL5Hd8zbyGO8HN0ZUd9fer3CyY/RNq6mFimXtHsNbboOUXL1JWxNwiAlwOne3g9lFDw/+2k2px4ZWpX8sL9cIo/VhzITwvHxbYTPN9CdX+uGMQYm1zEBy2SUrm/MOqdodbKKWa/ucVVSvnTza0KB2FbOEViBOsd8bbKcFhnMWb7wrGHq6v+anjRLgndMK4I8O/V4yRIKW7RJ/zF3FW+fpJA56XU+aKnbmvrG8906jAq3iECmpOe4ZxG5p5AMQPbs1zfok9k9Ciw1MGIs+wcA0EYw8H1rk+Zb3rPlIlJasJjJdpSMMCJijDlwFpcGD4TsBHWEcvJcFqab+rdbJ6wArk4JNanbVV71+Pda4WH7ffH5/+hiHYXGTzS3Sm5uSg91M8Wz2TAR37hBPl3NcHJ0/F3wFxJGzRObVbxnNpxqeTK3EtCDiPRTV3JUx/P/a5C1gVKAQyQLN492zLDGVHPsu+otOWffMTGBFnjucf/7k5IikFAZckvB5xMXozakl8Npahnqd3h/7O0mGRVEczQKbPBH19UHLy1Bpj0Dp7Ekwf096vqmB9KczxvlrCIfxM8jthFYuQKJH2q/BETVgOlkgxtL8OneHv5Qg0KEKJ3nZBwM9pF8zrCwb1Q0bZI=
  - secure: f2uCPxOIkJqBIaX5MnsdHlwfaUxF6v4V/wtyWvhre3j+X9A+COiOwio3Cgfe6OTLTUsujw07uaNoxmrmal5y5ohf5OWw6jIRE/x19I2V8lavBTJ2FXbfa3eVPUt1djxttvc5BwylnvEpZCPy09ES5Q/DuhMOmrTfHcWbVxLRu1urHNekltsmVrGY9zg/jhQdJ3HAcYHB186dHud0ckDEYQri4rA80lXRk4EoDWHpqs4OY6pATjZcUVmULPB1Kn13J9X2/UhG7SfCgU08o/knXRpNyJNWGDjRgLyggOMZWSpjuoxuPw/RosAS5PiZaxBJKOqV6p1SCQbe5cmcHcYcWCZLGYXlcipoYKxBSJgrui4CLozuSYBDm3+1e9GGREFGvnqApPzHnoLMA+z1LE1ZYBlRmCjS98u+8rN7B1HNIyp1b6tR8I7jOJsx4uFvDtzqDIsIKG/c1MgdOasV44k0tkdzFvkVuhlZ/eG50h8MFl32geNHF/C4apGCnKSCDMPd4Gi3zGhRlyjvBXjItuhJ5umIyyqqtNRAIdloTVNJ8VKkPyPrQBQE50Q0p36BynW0G+1jNL/9txtiV+wU2k7U2znOYuOUZxkgXEbO+sxedI0fzw3QRIfgCFgT8n357TPakVlTk4hlCowFBrIv8XD5EGjUdEpZ6l56UoQsO7fUTxo=
  - secure: PXCIKH3x6Mpa/iGtHtMlK84uWx2rNpu+xp9CkVGCpgzA6JssaX0j6XsQA47wNcTsDw0AWrwic4U4U3vBMAg2gQCZE3kbShIjOzNhfvWDJoWD/B/a9cD1JttthfFtGBjNdnhF/bJ4RlBGgl8kLOW7HAqJwgsSNd11l6b0pVI8D65stSXk8cj5PusB55n34fUSosoxY7Ae/XqcjaFymWeQjjh3RwQm/9foqcG9HZMwIJ3hfSUO3x4MoZlWHSD62jUBag2LMAzN0osbASd+iW5RS+5vioQz0InHPoTcHJ3IIIrjyXUzB4swAcEOobWBYUtmS61IbDA3Oeynj8d7Ye2dFb17FT8PmLl9a4Y5CGK9OfxP0glGpHgl6yByIS03XMH9SBwBFcp5WP9jD+JTxQUnAKefVKx0oc8RIGSmB4WXX0hzanLd7prYvITNx1ZTcVPY0ZhJn4lGVlycxXGrL7NvxJtkayzfCKo3ApA4+izHMACzeO+VXrbpGXT6oLOJvevb3NLaPtVKx7726UzBNChV8oIan2H/85WFoakijQ2x5n+O52XEiTw8sGEC7TvT0GhUSU9V3TpzCWwBJy71pwmyMNW6kbUgm28DLbNqE3sNn5kuPMDZmeNjHnQZNBx+eEHIOxENU99duyAb3Hh3AO2449BufmNHsXdTi2dbR+bvJW4=
